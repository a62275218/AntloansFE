<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>report analytics</title>
    <!-- <link rel="stylesheet" type="text/css" href="./assets/css/libs/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="./assets/css/libs/font-awesome.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/css/bootstrap-select.min.css">


    <!--my css-->
    <!-- <link rel="stylesheet" href="../styles/nav_bar.css"> -->
    <link rel="stylesheet" href="../styles/report-analytics.css">
 </head>

  <body>
    <nav class="nav_bar" ng-include="'views/partials/navigation.html'">
    </nav>

     <div class='main'>

           <aside class="left_bar" data-status='open' ng-include="'views/partials/sidebar.html'">
           </aside>

           <div class="right_part">
              <section class='tool_bar'>
              <div class="width_fix">

                 <div class="tool_top">
                    <h3>Report</h3>
                    <div class="data_show">
                        <div class="deal_total amount_box">
                          <div class=""><span>Total Loan Amount: </span><br><span class='data'> {{total_loan_amount|currency:"$":0}}</span>&nbsp;</div>
                        </div>
                        <div class="settle_total amount_box">
                          <div class=""><span>Average Loan Amount: </span><br><span class='data'>{{average_loan_amount|currency:"$":0}}</span>&nbsp;</div>
                        </div>
                        <!--<div class="overdue_total">
                          <div class=""><span class='data'>28</span>&nbsp;<span>overdue</span></div>
                          <img width="127px" height="27px;" src="./images/data-bar.png" alt="">
                        </div>-->
                    </div>
                 <div class="clear"></div>
                 </div>
                  <div class='search_input' style="display:none">
                      <div class="input-group margin-bottom-sm">
                          <span class="input-group-addon"><i class="fa fa-search fa-fw"></i></span>
                          <input class="form-control" type="text" placeholder="SEARCH" ng-model="searchInput">
                      </div>
                  </div>

                 <div class='tool_bar_above'>
                    <div class="buttons">
                       <button id='analytics_btn' class='show_light' type="button" name="button">ANALYTICS</button>
                       <!-- <button id='sales_btn' class='' type="button" name="button">SALES</button>
                       <button id='deals_btn' class='' type="button" name="button">DEALS</button> -->
                       <button id='log_btn' class='' type="button" name="button">LOG</button>
                    </div>
                     <div class="page_num" style="display:none">
                         <div class="page">
                             <ul class="pager">
                                 <li><a href="javascript:;" ng-click="prevPage()"><i class="fa fa-chevron-left"
                                                                                     aria-hidden="true"></i>&nbsp; Prev</a>
                                 </li>
                                 {{currentPage+1}}/{{totalPage}}
                                 <li><a href="javascript:;" ng-click="nextPage()">Next &nbsp;<i class="fa fa-chevron-right"
                                                                                                aria-hidden="true"></i></a>
                                 </li>
                             </ul>
                         </div>
                </div>

              </div>
              </div>
              </section>
              <div class="width_fix">
              <!-- charts content  -->
                  <!--line chart-->

          <div id="charts_list">

              <div class="charts_list">
                 <div class="payments_received">
                     <div class="payments_left">
                         <h4>Payments Received</h4>
                         <h5 class="avg p_amount" ng-if="filter_by.selected.name == 'Time'">Average Amount: <br>{{data.average_loan_amount|currency:"$":0}}</h5>
                         <h5 class="total p_amount" ng-if="filter_by.selected.name == 'Time'">Total Amount: <br>{{data.total_loan_amount|currency:"$":0}}</h5>
                         <h5 class="avg p_amount" ng-if="filter_by.selected.name == 'Bank'">Average Amount: <br>{{bank.average_loan_amount|currency:"$":0}}</h5>
                         <h5 class="total p_amount" ng-if="filter_by.selected.name == 'Bank'">Total Amount: <br>{{bank.total_loan_amount|currency:"$":0}}</h5>
                         <h5 class="avg p_amount" ng-if="filter_by.selected.name == 'Loan'">Average Amount: <br>{{loan.average_loan_amount|currency:"$":0}}</h5>
                         <h5 class="total p_amount" ng-if="filter_by.selected.name == 'Loan'">Total Amount: <br>{{loan.total_loan_amount|currency:"$":0}}</h5>
                         <div class="clear"></div>
                             <div google-chart chart="LineChart"></div>
                     </div>
                     <div class="payments_right">
                         <div class="time_frame">
                             <label>TIME FRAME:</label>
                             <ui-select ng-model="timeFrame.selected"
                                        search-enabled="false" class="selection"
                                        onkeypress="return false;" ng-disabled="disabled">
                                 <ui-select-match>
                                     <span ng-bind="$select.selected.name"></span>
                                 </ui-select-match>
                                 <ui-select-choices repeat="item in timeFrame track by $index">
                                     <span ng-bind="item.name"></span>
                                 </ui-select-choices>
                             </ui-select>
                         </div>
                         <div class="start_date" style="display:inline-block">
                             <label>FROM:</label><br>
                             <input class="btn btn-default" ui-date ng-model="startDate" style="width:110px;margin-bottom:5px;margin-top:5px">
                         </div>
                         <div class="close_date" style="display:inline-block">
                             <label>TO:</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
                             <input class="btn btn-default" ui-date ng-model="endDate" style="width:110px">
                         </div>
                         <span><small>*default start: 1st Jan of this year<br>default end: today</small></span><br>
                         <div style="display:inline-block">
                             <label>FILTER BY:</label>
                             <ui-select ng-model="filter_by.selected"
                                        search-enabled="false" class="selection"
                                        onkeypress="return false;" ng-disabled="disabled">
                                 <ui-select-match>
                                     <span ng-bind="$select.selected.name"></span>
                                 </ui-select-match>
                                 <ui-select-choices repeat="item in filter_by track by $index">
                                     <span ng-bind="item.name"></span>
                                 </ui-select-choices>
                             </ui-select>
                         </div>
                         <!--<div ng-if="filter_by.selected == filter_by[1]">
                             <label>USER TYPE:</label>
                             <ui-select ng-model="user_type.selected"
                                        search-enabled="false" class="selection"
                                        onkeypress="return false;" ng-disabled="disabled">
                                 <ui-select-match>
                                     <span ng-bind="$select.selected.name"></span>
                                 </ui-select-match>
                                 <ui-select-choices repeat="item in user_type track by $index">
                                     <span ng-bind="item.name"></span>
                                 </ui-select-choices>
                             </ui-select>
                         </div>-->
                         <!--<ui-select multiple ng-model="customers.selected" ng-if="filter_by.selected == filter_by[1] && user_type.selected == user_type[1]"
                                    theme="bootstrap" ng-disabled="ctrl.disabled" close-on-select="false"
                                    style="width:250px;margin-top:5px;">
                             <ui-select-match placeholder="Type to search customer">{{$item.first_name}} {{$item.last_name}}</ui-select-match>
                             <ui-select-choices repeat="item in customers | propsFilter: {email: $select.search,first_name: $select.search,last_name: $select.search}">
                                 <strong><div ng-bind-html="item.first_name +' '+ item.last_name | highlight:$select.search"></div></strong>
                                 <small>{{item.email}}</small>
                             </ui-select-choices>
                         </ui-select>
                         <ui-select multiple ng-model="brokers.selected" ng-if="filter_by.selected == filter_by[1] && user_type.selected == user_type[2]"
                                    theme="bootstrap" ng-disabled="ctrl.disabled" close-on-select="false"
                                    style="width:250px;margin-top:5px;">
                             <ui-select-match placeholder="Type to search customer">{{$item.first_name}} {{$item.last_name}}</ui-select-match>
                             <ui-select-choices repeat="item in brokers | propsFilter: {email: $select.search,first_name: $select.search,last_name: $select.search}">
                                 <strong><div ng-bind-html="item.first_name +' '+ item.last_name | highlight:$select.search"></div></strong>
                                 <small>{{item.email}}</small>
                             </ui-select-choices>
                         </ui-select>-->
                         <div ng-if="filter_by.selected.name == 'Bank'">
                             <label>BANK:</label>
                             <ui-select ng-model="banks.selected"
                                        search-enabled="false" class="selection"
                                        onkeypress="return false;" ng-disabled="disabled">
                                 <ui-select-match>
                                     <span ng-bind="$select.selected.name"></span>
                                 </ui-select-match>
                                 <ui-select-choices repeat="item in banks track by $index">
                                     <span ng-bind="item.name"></span>
                                 </ui-select-choices>
                             </ui-select>
                         </div>
                         <div ng-if="filter_by.selected.name == 'Loan'" style="display:inline-block">
                             <label>LOAN TYPE:</label>
                             <ui-select ng-model="loan_type.selected"
                                        search-enabled="false" class="selection"
                                        onkeypress="return false;" ng-disabled="disabled">
                                 <ui-select-match>
                                     <span ng-bind="$select.selected.label"></span>
                                 </ui-select-match>
                                 <ui-select-choices repeat="item in loan_type track by $index">
                                     <span ng-bind="item.label"></span>
                                 </ui-select-choices>
                             </ui-select>
                         </div>
                         <div ng-if="filter_by.selected.name == 'Loan'">
                             <label>LOAN STATUS</label>
                             <ui-select ng-model="loan_status.selected" class="selectpicker select_page"
                                        style="width:240px;display:inline-block;">
                                 <ui-select-match>
                                     <span ng-bind="$select.selected.label"></span>
                                 </ui-select-match>
                                 <ui-select-choices
                                         repeat="item in loan_status | propsFilter:{label:$select.search} track by $index">
                                     <span ng-bind="item.label"></span>
                                 </ui-select-choices>
                             </ui-select>
                         </div>
                         <div ng-if="filter_by.selected.name == 'Loan'">
                             <label>PROCESSING TIME</label><br>
                             <span>No more than </span><input style="width:90px;" class="btn btn-default" type="number" ng-model="processing_time"><span> Days</span>
                         </div><br>

                         <button type="button" name="button" ng-click="applyFilter1()">APPLY</button>
                     </div>
                 </div>
                 <br>
              <div class="clear"></div>
              </div>
                  <!--bar chart-->
                   <div class="charts_list">
                      <div class="payments_received">
                          <div class="payments_left">
                              <h4>Payments Received</h4>
                              <h5 class="avg p_amount" ng-if="filter_by_bar.selected.name == 'User Type' && user_type.selected.name == 'Admin'">Average Amount: <br>{{admin.average_loan_amount|currency:"$":0}}</h5>
                              <h5 class="total p_amount" ng-if="filter_by_bar.selected.name == 'User Type' && user_type.selected.name == 'Admin'">Total Amount: <br>{{admin.total_loan_amount|currency:"$":0}}</h5>
                              <h5 class="avg p_amount" ng-if="filter_by_bar.selected.name == 'User Type' && user_type.selected.name == 'Broker'">Average Amount: <br>{{broker.average_loan_amount|currency:"$":0}}</h5>
                              <h5 class="total p_amount" ng-if="filter_by_bar.selected.name == 'User Type' && user_type.selected.name == 'Broker'">Total Amount: <br>{{broker.total_loan_amount|currency:"$":0}}</h5>
                              <h5 class="avg p_amount" ng-if="filter_by_bar.selected.name == 'Bank'">Average Amount: <br>{{bank_bar.average_loan_amount|currency:"$":0}}</h5>
                              <h5 class="total p_amount" ng-if="filter_by_bar.selected.name == 'Bank'">Total Amount: <br>{{bank_bar.total_loan_amount|currency:"$":0}}</h5>
                              <div class="clear p_amount"></div>
                              <div google-chart chart="BarChart"></div>
                          </div>

                          <div class="payments_right">
                              <div style="display:inline-block">
                                  <label>FILTER BY:</label>
                                  <ui-select ng-model="filter_by_bar.selected"
                                             search-enabled="false" class="selection"
                                             onkeypress="return false;" ng-disabled="disabled">
                                      <ui-select-match>
                                          <span ng-bind="$select.selected.name"></span>
                                      </ui-select-match>
                                      <ui-select-choices repeat="item in filter_by_bar track by $index">
                                          <span ng-bind="item.name"></span>
                                      </ui-select-choices>
                                  </ui-select>
                              </div><br>
                              <div ng-if="filter_by_bar.selected == filter_by_bar[0]">
                                  <label>USER TYPE:</label>
                                  <ui-select ng-model="user_type.selected"
                                             search-enabled="false" class="selection"
                                             onkeypress="return false;" ng-disabled="disabled">
                                      <ui-select-match>
                                          <span ng-bind="$select.selected.name"></span>
                                      </ui-select-match>
                                      <ui-select-choices repeat="item in user_type track by $index">
                                          <span ng-bind="item.name"></span>
                                      </ui-select-choices>
                                  </ui-select>
                              </div>


                              <!--<ui-select multiple ng-model="customers.selected" ng-if="filter_by.selected == filter_by[1] && user_type.selected == user_type[1]"
                                         theme="bootstrap" ng-disabled="ctrl.disabled" close-on-select="false"
                                         style="width:250px;margin-top:5px;">
                                  <ui-select-match placeholder="Type to search customer">{{$item.first_name}} {{$item.last_name}}</ui-select-match>
                                  <ui-select-choices repeat="item in customers | propsFilter: {email: $select.search,first_name: $select.search,last_name: $select.search}">
                                      <strong><div ng-bind-html="item.first_name +' '+ item.last_name | highlight:$select.search"></div></strong>
                                      <small>{{item.email}}</small>
                                  </ui-select-choices>
                              </ui-select>
                              <ui-select multiple ng-model="brokers.selected" ng-if="filter_by.selected == filter_by[1] && user_type.selected == user_type[2]"
                                         theme="bootstrap" ng-disabled="ctrl.disabled" close-on-select="false"
                                         style="width:250px;margin-top:5px;">
                                  <ui-select-match placeholder="Type to search customer">{{$item.first_name}} {{$item.last_name}}</ui-select-match>
                                  <ui-select-choices repeat="item in brokers | propsFilter: {email: $select.search,first_name: $select.search,last_name: $select.search}">
                                      <strong><div ng-bind-html="item.first_name +' '+ item.last_name | highlight:$select.search"></div></strong>
                                      <small>{{item.email}}</small>
                                  </ui-select-choices>
                              </ui-select>-->

                              <button type="button" name="button" ng-click="applyFilter2()">APPLY</button>
                          </div>
                      </div>
                      <br>
                      <div class="clear"></div>
                  </div>
             </div>

              <!--sales content-->
               <div id="sales_list">
                <div class='user_list'>
                   <table class='"table table-striped"'>
                      <thead>
                        <tr><th>CLIENT NAME &nbsp;<i class="fa fa-caret-down fa-lg" aria-hidden="true"></i></th>
                            <th>LAST ACTIVITY &nbsp;<i class="fa fa-caret-down fa-lg" aria-hidden="true"></i></th>
                            <th>CLIENT TYPE &nbsp;<i class="fa fa-caret-down fa-lg" aria-hidden="true"></i></th>
                            <th>ACCOUNT MANAGER &nbsp;<i class="fa fa-caret-down fa-lg" aria-hidden="true"></i></th>
                            <th>ACTIONS</th>
                            </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td><img src="http://www.bloglet.com/gallery/small-pets/small-pets1.jpg" alt="">&nbsp; Jenny Chen</td>
                          <td>12/08/16</td>
                          <td>Supervisor</td>
                          <td>David Cutter</td>
                          <td><i class="fa fa-pencil" aria-hidden="true"></i>&nbsp; &nbsp;
                            <a href="#"><i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                          </td>
                        </tr>

                        <tr>
                          <td><img src="http://www.bloglet.com/gallery/small-pets/small-pets1.jpg" alt="">&nbsp; Jenny Chen</td>
                          <td>12/08/16</td>
                          <td>Supervisor</td>
                          <td>David Cutter</td>
                          <td><i class="fa fa-pencil" aria-hidden="true"></i>&nbsp; &nbsp;
                            <a href="#"><i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                          </td>
                        </tr>

                        <tr>
                          <td><img src="http://www.bloglet.com/gallery/small-pets/small-pets1.jpg" alt="">&nbsp; Jenny Chen</td>
                          <td>12/08/16</td>
                          <td>Supervisor</td>
                          <td>David Cutter</td>
                          <td><i class="fa fa-pencil" aria-hidden="true"></i>&nbsp; &nbsp;
                            <a href="#"><i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                          </td>
                        </tr>
                      </tbody>

                   </table>

                   <div class="page_message">
                      <p>Showing 1-9 of 118</p>
                   </div>
                </div>

              </div>

               <!--deals content-->
               <div id="deals_list">
                <div class='user_list'>
                   <table class='"table table-striped"'>
                      <thead>
                        <tr><th>CLIENT NAME &nbsp;<i class="fa fa-caret-down fa-lg" aria-hidden="true"></i></th>
                            <th>LAST ACTIVITY &nbsp;<i class="fa fa-caret-down fa-lg" aria-hidden="true"></i></th>
                            <th>CLIENT TYPE &nbsp;<i class="fa fa-caret-down fa-lg" aria-hidden="true"></i></th>
                            <th>ACCOUNT MANAGER &nbsp;<i class="fa fa-caret-down fa-lg" aria-hidden="true"></i></th>
                            <th>ACTIONS</th>
                            </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td><img src="http://www.bloglet.com/gallery/small-pets/small-pets1.jpg" alt="">&nbsp; Jenny Chen</td>
                          <td>12/08/16</td>
                          <td>Supervisor</td>
                          <td>David Cutter</td>
                          <td><i class="fa fa-pencil" aria-hidden="true"></i>&nbsp; &nbsp;
                            <a href="#"><i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                          </td>
                        </tr>

                        <tr>
                          <td><img src="http://www.bloglet.com/gallery/small-pets/small-pets1.jpg" alt="">&nbsp; Jenny Chen</td>
                          <td>12/08/16</td>
                          <td>Supervisor</td>
                          <td>David Cutter</td>
                          <td><i class="fa fa-pencil" aria-hidden="true"></i>&nbsp; &nbsp;
                            <a href="#"><i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                          </td>
                        </tr>

                        <tr>
                          <td><img src="http://www.bloglet.com/gallery/small-pets/small-pets1.jpg" alt="">&nbsp; Jenny Chen</td>
                          <td>12/08/16</td>
                          <td>Supervisor</td>
                          <td>David Cutter</td>
                          <td><i class="fa fa-pencil" aria-hidden="true"></i>&nbsp; &nbsp;
                            <a href="#"><i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                          </td>
                        </tr>

                        <tr>
                          <td><img src="http://www.bloglet.com/gallery/small-pets/small-pets1.jpg" alt="">&nbsp; Jenny Chen</td>
                          <td>12/08/16</td>
                          <td>Supervisor</td>
                          <td>David Cutter</td>
                          <td><i class="fa fa-pencil" aria-hidden="true"></i>&nbsp; &nbsp;
                            <a href="#"><i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                          </td>
                        </tr>
                      </tbody>

                   </table>

                   <div class="page_message">
                      <p>Showing 1-9 of 118</p>
                   </div>
                </div>

              </div>


              <!-- log content -->
              <div id="log_list">
                <div class='user_list'>
                   <table class='"table table-striped"'>
                      <thead>
                        <tr><th ng-click="sortObj('user',$event)">USER&nbsp;<i class="fa fa-caret-up fa-lg" aria-hidden="true"></i></th>
                            <th ng-click="sortObj('action',$event)">ACTION &nbsp;<i class="fa fa-caret-up fa-lg" aria-hidden="true"></i></th>
                            <!--<th ng-click="sortObj('content',$event)" style="min-width:150px;">CONTENT &nbsp;<i class="fa fa-caret-up fa-lg" aria-hidden="true"></i></th>-->
                            <th ng-click="sortObj('createAt',$event)">TIME &nbsp;<i class="fa fa-caret-up fa-lg" aria-hidden="true"></i></th>
                            </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="item in logs
                            | orderBy:sort:desc
                            | filter:searchInput
                            | startFrom:currentPage * pageAmount.selected.name
                            | limitTo:pageAmount.selected.name
                         track by $index">
                          <td>{{item.user}}</td>
                          <td>{{item.action}}</td>
                          <!--<td>{{item.content}}</td>-->
                          <td>{{item.createAt|date:"MM/dd/yyyy   h:mma"}}</td>
                        </tr>
                      </tbody>

                   </table>


                </div>
                </div>

              </div>

            </div>
            <!-- width_fix end -->
          </div>

     </div>
     <!-- <script src="./assets/js/libs/jquery-3.2.1.min.js"></script>
     <script src="./assets/js/libs/bootstrap.min.js"></script> -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js"></script>
     <!--my js-->
     <script type="text/javascript" src="../scripts/loan-job-list.js"></script>
     <script type="text/javascript" src="../scripts/report-analytics.js"></script>
  </body>
</html>
